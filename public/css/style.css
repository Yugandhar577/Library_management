@import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');

/* --- COLOR VARIABLES (Consolidated) --- */
:root {
  --mocha: #30210b; /* Dark background for sidebar/titles */
  --offwhite: #ddceb4; /* Main content background */
  --black: #1b1b1b; /* Borders, text, shadows */
  --accent: #d97a00; /* Orange/Gold accent */
}

/* --- BASE STYLES & LAYOUT FIX --- */
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: 'VT323', monospace;
  background-color: var(--offwhite);
  color: var(--black);
}

.dashboard-container {
  display: flex;
  height: 100vh;
  overflow: hidden;
}

/* --- SIDEBAR --- */
.sidebar {
  background-color: var(--offwhite);
  width: 250px; /* Default (Expanded) width */
  height: 100vh;
  position: fixed;
  top: 0;
  left: 0;
  display: flex;
  flex-direction: column;
  transition: width 0.3s ease;
  z-index: 1000;
  border-right: 2px solid var(--black);
}

.logo {
  text-align: center;
  background: var(--black);
  padding: 1rem;
  font-size: 1.5rem;
  border-bottom: 2px solid var(--offwhite);
  color: var(--offwhite); /* Ensure logo text is visible */
}

.menu {
  display: flex;
  flex-direction: column;
  padding: 1rem 0.5rem;
  flex-grow: 1; /* Allow menu to take up available space */
}

/* Sidebar links */
.sidebar .menu a {
  display: flex;
  align-items: center;
  gap: 1rem;
  color: var(--black);
  text-decoration: none;
  padding: 0.6rem 1rem;
  margin: 0.2rem 0;
  border-left: 4px solid transparent;
  transition: all 0.2s ease;
}

.sidebar .menu a i {
  font-size: 1.2rem;
  width: 20px; /* Keep icons aligned */
  text-align: center;
}

.sidebar .menu a .link-text {
  white-space: nowrap;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

.sidebar .menu a:hover,
.sidebar .menu a.active {
  background: #ffffff;
  border-left: 4px solid var(--accent);
}

/* Collapsed state */
.sidebar.collapsed {
  width: 70px; /* Collapsed width */
}

.sidebar.collapsed .menu a .link-text {
  opacity: 0;
  visibility: hidden;
  width: 0; /* Ensures the hidden text doesn't affect layout */
  display: none;
}

.sidebar.collapsed .menu a {
  padding-left: 0;
  padding-right: 0;
  justify-content: center; /* This centers the <i> block */
}

.sidebar.collapsed .menu a i {
  width: 100%; /* Make the icon container fill the link */
  text-align: center; /* Center the icon *inside* its container */
}
.sidebar.collapsed .logo h2 {
  font-size: 1.5rem;
  text-align: center;
}

/* Toggle button */
#toggleBtn {
  background: var(--offwhite);
  color: var(--black);
  border: 3px solid var(--black);
  box-shadow: 2px 3px 0 var(--mocha);
  cursor: pointer;
  font-family: 'VT323', monospace;
  padding: 0.5rem 0.8rem;
  width: 90%;
  margin: 1rem auto;
  display: block;
  transition: all 0.2s ease;
}

#toggleBtn:hover {
  background: var(--accent);
  color: var(--black);
  transform: translateY(-2px);
  box-shadow: 6px 6px 0 var(--black);
}

#toggleBtn:active {
  transform: translateY(0);
  box-shadow: 2px 2px 0 var(--black);
}

/* --- MAIN CONTENT & LAYOUT --- */

/* Main content should start beside sidebar */
main { 
  padding: 1rem;
  margin-top: -1rem;
  background: var(--offwhite);
  transition: margin-left 0.3s ease;
  width: 95%; 
}

/* Adjust main content when sidebar is collapsed (70px) */
.sidebar.collapsed ~ main {
  margin-left: 70px; 
}

.main-content {
  flex: 1;
  display: flex;
  flex-direction: column;

}

/* --- FOOTER --- */
footer {
  background: var(--offwhite);
  color: var(--black);
  text-align: center;
  /* Fixed height + padding is about 40px */
  padding: 0.01rem 0; 
  position: fixed;
  bottom: 0;
  /* Use a large calc to ensure it spans the whole width not covered by the fixed sidebar */
  width: calc(100% - 250px); 
  border-top: 2px solid var(--black);
  font-size: 1rem;
  left: 250px;
  transition: left 0.3s ease, width 0.3s ease;
  z-index: 999; /* Below sidebar */
}

.sidebar.collapsed ~ footer {
  left: 70px;
  width: calc(100% - 70px);
}

/* DASHBOARD CONTENT */
.dashboard {
  padding: 1.5rem;
}

.retro-title {
  font-size: 1.6rem;
  border-bottom: 2px solid var(--black);
  padding-bottom: 0.5rem;
  margin-bottom: 1rem;
}

/* STATS */
.stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.stat-box {
  background: var(--offwhite);
  color: var(--black);
  border: 3px solid var(--black);
  padding: 1rem;
  text-align: center;
  box-shadow: 4px 4px 0 var(--mocha);
  image-rendering: pixelated;
}

.stat-box h3 {
  margin: 0;
  font-size: 1.1rem;
}

.stat-box p {
  margin: 0.4rem 0 0;
  font-size: 1.8rem;
  color: var(--accent);
}

/* RETRO PANELS */
.retro-panels {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.2rem;
}

.retro-window {
  border: 3px solid var(--black);
  background: var(--offwhite);
  box-shadow: 4px 4px 0 var(--mocha);
}

.window-title {
  background: var(--offwhite);
  color: var(--black);
  padding: 0.5rem;
  border-bottom: 3px solid var(--mocha);
  font-size: 1.1rem;
}

.window-body {
  padding: 0.8rem;
}

.retro-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 1rem;
}

.retro-table th,
.retro-table td {
  border: 2px solid var(--black);
  padding: 0.5rem;
  text-align: left;
}

/* --- STATUS COLORS (Used in table/alerts) --- */
.status {
  padding: 0.2rem 0.5rem;
  font-weight: bold;
  border-radius: 2px;
}

.status.green { background: #3a9d23; color: #fff; }
.status.yellow { background: #d9b400; color: #000; }
.status.red { background: #b22222; color: #fff; }

.alerts {
  list-style: none;
  padding: 0;
  margin: 0;
}

.alerts li {
  padding: 0.4rem 0;
}

.alerts .red { color: #b22222; }
.alerts .yellow { color: #d9b400; }
.alerts .green { color: #3a9d23; }

/* ===== Books Page ===== */
.toolbar {
  display: flex;
  gap: 1rem;
  align-items: center;
  margin-bottom: 1rem;
}

.toolbar input,
.toolbar select {
  font-family: 'VT323', monospace;
  background: var(--offwhite);
  border: 2px solid var(--black);
  padding: 0.4rem 0.6rem;
  font-size: 1rem;
  box-shadow: 3px 3px 0 var(--mocha);
  outline: none;
}

.toolbar input:focus,
.toolbar select:focus {
  border-color: var(--accent);
}

.books-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 1rem;
}

.book-card {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  background: var(--offwhite);
  color: var(--black);
  border: 3px solid var(--black);
  box-shadow: 4px 4px 0 var(--mocha);
  padding: 1rem;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: left;
  font-family: 'VT323', monospace;
}

.book-card:hover {
  transform: translateY(-3px);
  box-shadow: 6px 6px 0 var(--mocha);
  background: #ffffff;
}

/* --- FIX: Added styles for left info block --- */
.book-info-left {
  flex: 1; /* Allows the info to take up available space */
  padding-right: 1rem; /* Adds spacing before the buttons */
  /* Ensures long descriptions will wrap */
  word-break: break-word; 
}

.book-info-left h3 {
  margin: 0;
  color: var(--accent);
  font-size: 1.2rem;
}

.book-info-left p {
  margin: 0.2rem 0;
}

/* --- FIX: Replaced styles for right button block --- */
.book-info-right {
  display: flex;
  flex-direction: column; /* Stacks the buttons vertically */
  gap: 0.5rem; /* Adds space between the buttons */
  flex-shrink: 0; /* Prevents buttons from shrinking */
}

/* --- FIX: Removed incorrect .book-card .status block --- */

/* --- FIX: Added styles for smaller card buttons --- */
.book-card .retro-btn {
  /* Override default retro-btn styles for a smaller version */
  font-size: 1rem;
  padding: 0.4rem 0.8rem;
  width: 100%; /* Makes all buttons a consistent width */
  text-align: center;
  margin: 0;
  box-shadow: 3px 3px 0 var(--black); /* Smaller shadow */
}

.book-card .retro-btn:hover {
  transform: translateY(-2px);
  box-shadow: 4px 4px 0 var(--black);
}

.book-card .retro-btn:active {
  transform: translateY(0);
  box-shadow: 2px 2px 0 var(--black);
}

/* * --- FIX: Added styles for text-based availability status ---
 * This overrides the global .status (which uses backgrounds) 
 * to use text color, as seen in the screenshot.
*/
.book-card .status {
  /* Reset global .status styles */
  background: none;
  padding: 0;
  margin: 0;
  border-radius: 0;
  display: inline; /* Ensures it flows with the "Available:" text */
  font-weight: bold;
}

.book-card .status.green {
  color: #3a9d23; /* Green text */
}

.book-card .status.yellow {
  /* Use the accent orange for 'low' stock, as in "A Legacy of Ash" */
  color: var(--accent); 
}

.book-card .status.red {
  color: #b22222; /* Red text for 'out of stock' */
}


/* ===== Members Page ===== */
.members-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 1rem;
}

.member-card {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  background: var(--offwhite);
  color: var(--black);
  border: 3px solid var(--black);
  box-shadow: 4px 4px 0 var(--mocha);
  padding: 1rem;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: left;
  font-family: 'VT323', monospace;
}

.member-card:hover {
  transform: translateY(-3px);
  box-shadow: 6px 6px 0 var(--black);
  background: #ffffff;
}

.member-info-left h3 {
  margin: 0;
  color: var(--accent);
  font-size: 1.2rem;
}

.member-info-left p {
  margin: 0.2rem 0;
}

.member-info-right {
  text-align: right;
}

/* ===== Transactions Page ===== */
.transactions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
  gap: 20px;
  width: 100%;
  box-sizing: border-box;
}

.transaction-card {
  background: var(--offwhite);
  border: 3px solid var(--black);
  box-shadow: 4px 4px 0 var(--black);
  padding: 1rem;
  font-family: 'VT323', monospace;
  display: flex;
  justify-content: space-between;
  cursor: pointer;
  transition: transform 0.15s ease;
}

.transaction-card:hover {
  transform: scale(1.02);
  background: #ece8df; /* Slightly lighter offwhite for hover */
}

.transaction-info-left h3 {
  margin: 0 0 0.5rem 0;
  font-size: 1rem;
}

.transaction-info-right p {
  margin: 0.2rem 0;
}

.transaction-card .status {
  text-transform: uppercase;
  font-weight: bold;
  /* Removed border-radius from transaction status to use a text color instead */
  padding: 0; 
  background: none;
}

.transaction-card .status.issued {
  color: #007bff; /* Blue */
}
.transaction-card .status.returned {
  color: #3a9d23; /* Green */
}
.transaction-card .status.overdue {
  color: #b22222; /* Red */
}

/* ===== ERROR PAGE ===== */
.error-page-container {
  display: flex;
  justify-content: center;
  align-items: center;
  /* Adjust height to fit above the fixed footer */
  height: calc(100vh - 42px); 
  background: var(--offwhite);
  font-family: 'VT323', monospace;
  color: var(--black);
}

.error-window {
  background: var(--offwhite);
  border: 4px solid var(--black);
  box-shadow: 6px 6px 0 var(--black);
  width: 480px;
  max-width: 90%;
}

.error-title-bar {
  background: var(--mocha);
  color: var(--offwhite);
  border-bottom: 3px solid var(--black);
  padding: 0.5rem 1rem;
  font-size: 1.3rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.error-body {
  text-align: center;
  padding: 2rem 1rem;
}

.error-code {
  font-size: 6rem;
  color: var(--accent);
  margin: 0;
  text-shadow: 3px 3px 0 var(--black);
}

.error-message {
  font-size: 1.8rem;
  margin: 0.5rem 0;
}

.error-subtext {
  font-size: 1.1rem;
  color: #555;
  margin-bottom: 2rem;
}

/* ===== BUTTONS (Consolidated) ===== */
.retro-btn {
  background: var(--mocha);
  color: var(--offwhite);
  border: 3px solid var(--black);
  box-shadow: 4px 4px 0 var(--black);
  font-family: 'VT323', monospace;
  font-size: 1.3rem;
  padding: 0.6rem 1.5rem;
  text-transform: uppercase;
  text-decoration: none;
  transition: all 0.15s ease;
  display: inline-block;
  cursor: pointer;
}

.retro-btn:hover {
  background: var(--accent);
  color: var(--black);
  transform: translateY(-3px);
  box-shadow: 6px 6px 0 var(--black);
}

.retro-btn:active {
  transform: translateY(0);
  box-shadow: 2px 2px 0 var(--black);
}

.btn-success {
  background: var(--accent);
  color: var(--black);
  border: 3px solid var(--black);
  box-shadow: 4px 4px 0 var(--black);
  font-family: 'VT323', monospace;
  padding: 0.5rem 1.2rem;
  font-size: 1.2rem;
  text-transform: uppercase;
  cursor: pointer;
  transition: all 0.2s ease;
}

.btn-success:hover {
  background: var(--mocha);
  color: var(--offwhite);
  transform: translateY(-3px);
  box-shadow: 6px 6px 0 var(--black);
}

.btn-success:active {
  transform: translateY(0);
  box-shadow: 2px 2px 0 var(--black);
}

/*Â  ===== BOOK FORM STYLES ===== */
.book-form {
  max-width: 700px;
  margin: 2rem auto;
  background: var(--offwhite);
  border: 3px solid var(--black);
  box-shadow: 6px 6px 0 var(--black);
  padding: 1.5rem;
}

.book-form h1 {
  text-align: center;
  font-size: 1.8rem;
  color: var(--black);
  border-bottom: 3px solid var(--black);
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
}

.form-group {
  display: flex;
  flex-direction: column;
  margin-bottom: 1rem;
}

.form-group label {
  font-size: 1.2rem;
  margin-bottom: 0.3rem;
  color: var(--black);
}

.retro-input,
.book-form textarea {
  background: var(--offwhite);
  border: 2px solid var(--black);
  font-family: 'VT323', monospace;
  font-size: 1.1rem;
  padding: 0.4rem 0.6rem;
  box-shadow: 3px 3px 0 var(--black);
  outline: none;
}

.retro-input:focus,
.book-form textarea:focus {
  border-color: var(--accent);
}

.form-actions {
  text-align: center;
  margin-top: 1.5rem;
}

/* MEDIA QUERIES for responsiveness on smaller screens */
@media (max-width: 768px) {
    /* Collapse sidebar by default on small screens if you wish, 
       but for now we'll just ensure main content/footer adjusts */
    main {
        margin-left: 70px; /* Use collapsed margin on small screens */
    }
    .sidebar:not(.collapsed) ~ main {
        margin-left: 250px; /* Keep expanded if user forces it */
    }
    .retro-panels {
        grid-template-columns: 1fr; /* Stack panels on small screens */
    }
    .footer {
        width: calc(100% - 70px);
        left: 70px;
    }
    .sidebar:not(.collapsed) ~ footer {
        width: calc(100% - 250px);
        left: 250px;
    }
}

/* --- SIDEBAR --- */
/* ... existing sidebar styles ... */

.logo {
  text-align: center; /* Keep this to center the image */
  background: var(--black);
  padding: 1rem;
  /* font-size: 1.5rem; <--- You can remove this as it's no longer text */
  border-bottom: 2px solid var(--offwhite);
  /* color: var(--offwhite); <--- You can remove this too */
}

/* New style for your logo image */
.logo .lms-logo-img {
    max-width: 50%; /* Adjust as needed, makes it responsive to the sidebar width */
    height: auto;
    display: block; /* Ensures it respects margin: auto for vertical centering if needed */
    margin: 0 auto; /* Centers the image horizontally within the logo div */
    image-rendering: pixelated; /* Essential for keeping the pixel art sharp */
}

/* For the collapsed state, if you want the logo to shrink */
.sidebar.collapsed .logo .lms-logo-img {
    max-width: 110%; /* Smaller for collapsed state */
}

